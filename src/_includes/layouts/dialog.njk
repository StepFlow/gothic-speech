{% extends "layouts/base.njk" %}

{% block head %}
  <link rel="stylesheet" href="/css/media.css" />
{% endblock %}

{% block content %}
  {# <h2>{{ dialogs[key] | debug | safe }}</h2> #}

  <style>
    table, th, td {
      border: 1px solid black;
    }

    table {
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 4px 8px;
    }

    audio {
      display: block;
    }
  </style>

  <table>
    <thead>
      <tr>
        <th>{{ "Hero" }}</th>
        <th>{{ "Text" }}</th>
        <th>{{ "Audio" }}</th>
      </tr>
    </thead>

    <tbody>
      {% for line in dialog.lines %}
        <tr>
          <td>
            {{ "Me" if line.sender == "self" else (dialog.name if dialog.name else "Him") }}
          </td>

          <td>{{ line.text }}</td>

          <td>
            <audio controls="controls" preload="none">
              <source src="{{ storageUrl + line.audio | upper + '.m4a' }}" type="audio/mp4">
            </audio>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}
